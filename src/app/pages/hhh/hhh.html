<!-- Header -->

<app-header></app-header>

<!-- Top navigation -->
<div class="flex justify-between items-center mt-4 mb-4 w-[84%] ml-[112px] text-sm text-gray-600">

  <a mat-button class="flex items-center gap-1">
    <mat-icon>arrow_back</mat-icon>
    Back to TG Dashboard
  </a>

  <button mat-button class="flex items-center gap-1">
    Logout
    <mat-icon>logout</mat-icon>
  </button>

</div>


<!-- Main card -->
  <div class=" bg-gray-50 p-8">
  <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-sm border border-gray-200 p-6">

    <!-- TOP ROW -->
    <div class="grid grid-cols-1 gap-4">

      <div
        class="ones grid items-center gap-6"
        style="grid-template-columns: 280px 1fr auto;"
      >

        <!-- Left -->
        <div class="space1">
          <label class="text-xs text-gray-500 block">
            Main Common Name(s):
          </label>
          <h2 class="text-base font-semibold text-green-900">
            European Pear
          </h2>
        </div>

        <!-- Middle -->
        <div class="space">
          <label class="text-xs text-gray-500 block">
            UPOV Code(s):
          </label>
          <p class="text-sm font-semibold text-green-900">
            PYRUS_COM; PYRUS_BCO; PYRUS_CPB; PYRUS_CUS
          </p>
        </div>

        <!-- Button -->
        <button
          mat-raised-button
          class="!bg-emerald-700 hover:!bg-emerald-800
                 !text-white !px-4 !py-1.5 !rounded-full
                 flex items-center gap-2 h-[32px]"
        >
         <mat-icon class="!w-4 !h-4" style="color: goldenrod;">
  check
</mat-icon>

    <span class="text-sm font-medium" style="color:yellow;">
     Submit
    </span>


        </button>

      </div>
    </div>

    <!-- BOTTOM SECTION (unchanged â€“ already correct) -->
    <div class="mt-6 flex items-center justify-between border-t border-gray-200 pt-6">
      <button
        (click)="isExpanded = !isExpanded"
        class="flex items-center gap-2 text-gray-700 hover:text-gray-900 transition-colors bg-transparent border-none cursor-pointer"
      >
        <mat-icon [class.rotate-180]="isExpanded" class="transition-transform">
          expand_more
        </mat-icon>
        <span class="text-sm font-medium">More details</span>
      </button>

      <div class="text-right">
        <div class="text-xs text-gray-500">TG/export_test_2</div>
        <div class="text-xs text-gray-500">
          Saved: 02 Dec, 2025 - 31 Dec, 2025
        </div>
      </div>
    </div>

    <!-- EXPANDABLE CONTENT (unchanged) -->
    <div *ngIf="isExpanded" class="mt-6 pt-6 border-t border-gray-200">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-sm font-semibold text-gray-700 mb-2">
            Additional Information
          </h3>
          <p class="text-sm text-gray-600">
            More details about the European Pear variety would appear here.
          </p>
        </div>
        <div>
          <h3 class="text-sm font-semibold text-gray-700 mb-2">
            Classification Details
          </h3>
          <p class="text-sm text-gray-600">
            UPOV classification and variety characteristics.
          </p>
        </div>
      </div>
    </div>

  </div>
</div>


<div class="h-screen flex  overflow-y-auto">


  <!-- ================= SIDEBAR ================= -->
<!-- ================= SIDEBAR ================= -->
<aside class="w-48 ml-27 bg-white border-r border-gray-200 mt-6 hidden md:block">

  <mat-nav-list class="text-m">

    <!-- Title -->
    <div class="px-4 py-3 font-semibold text-gray-500">
      Chapters
    </div>

    <!-- Chapter Items -->
    <a
      mat-list-item
      *ngFor="let chapter of chapters"

      (click)="setActiveChapter(chapter)"
      class="mx-2 my-0.5 flex items-center gap-3 rounded-md px-3 py-2 cursor-pointer
             transition-colors
             hover:bg-gray-100"
      [ngClass]="{
        'bg-emerald-50 border-l-4 border-emerald-500': chapter.active
      }"
    >
      <!-- Number Circle -->
   <span
  class="flex h-7 w-7 items-center justify-center rounded-full border text-xs font-semibold text-gray-700"
  style="border: 2px solid goldenrod"
  [ngClass]="{
    'bg-emerald-500 text-white': chapter.active
  }"
>
  {{ chapter.id }}
</span>


      <!-- Label -->
     <span
  class="text-[16px] leading-tight text-gray-700"
  [ngClass]="{
    'text-emerald-600 font-semibold': chapter.active
  }"
>
  {{ chapter.label }}
</span>

    </a>

    <!-- Collapse -->
    <div
      class="mt-2 flex items-center gap-2 px-4 py-3 text-sm font-medium
             text-emerald-600 border-t border-gray-200 cursor-pointer"
    >
      <mat-icon class="text-base">chevron_left</mat-icon>
      Collapse
    </div>

  </mat-nav-list>
</aside>




<main class="flex-1 p-6 mr-9  ">

<div class="max-w-5xl mx-auto p-6 mr-15  bg-white space-y-6">

  <div class="mb-6">
  <h1 class="text-2xl font-semibold text-green-900">
    {{ sectionTitle1 }}
  </h1>
</div>

  <!-- Section 1: Related links and main sentence -->
  <div class="border-b border-gray-200 pb-4 " >

    <!-- Related links -->
    <div class="text-sm text-gray-700 mb-2">
      <span class="font-medium">Related links:</span>

      <a class="ml-1 text-green-900 hover:underline inline-flex items-center gap-1" href="#">
        More than one species (GN3)
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
          <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
        </svg>
      </a>

      <a class="ml-2 text-green-900 hover:underline inline-flex items-center gap-1" href="#">
        Different types or groups within a species or genus (GN4)
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
          <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
        </svg>
      </a>

      <a class="ml-2 text-green-900 hover:underline inline-flex items-center gap-1" href="#">
        Family name (GN5)
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
          <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
        </svg>
      </a>
      <br>

      <a class="text-green-900 hover:underline inline-flex items-center gap-1" href="#">
        Guidance for New Types and Species (GN6)
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
          <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
        </svg>
      </a>
    </div>

    <!-- Main sentence with icon -->
    <div class="flex justify-between items-start mt-4">
      <p class="text-base text-gray-800 leading-snug">
        These Test Guidelines apply to all varieties of
        <span class="italic">Malpighia emarginata</span> DC.
        <br />
        Continue Sentence
      </p>

      <svg class="w-10 h-5 text-green-900 mb-7 mr-10" fill="currentColor" viewBox="0 0 20 20">
        <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
        <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
      </svg>
    </div>

  </div>

  <!-- Section 2: Clarification question -->

<div class="max-w-5xl text-gray-800">

  <!-- Question -->
  <p class="text-sm leading-relaxed mb-2">
    Should clarification be provided that any other species or hybrids not explicitly covered
    by these Test Guidelines should be treated according <br> to the provisions of document
    TGP/12 "Guidance for New Types and Species"
    <span class="text-red-500">*</span>
  </p>

  <!-- Yes / No -->
  <mat-radio-group class="flex gap-6 ml-[28%] mb-4">
    <mat-radio-button value="yes">Yes</mat-radio-button>
    <mat-radio-button value="no">No</mat-radio-button>
  </mat-radio-group>

  <!-- Guidance sentence with inline input -->
 <!-- Guidance sentence with inline input -->
<!-- Guidance sentence with inline input -->
<div class="flex flex-wrap items-baseline gap-x-1 gap-y-1 text-sm text-gray-700">
  <span>Guidance on the use of Test Guidelines for</span>

  <input
    type="text"
    value="interspec. hybrids"
    class="border border-gray-300 bg-blue-50 rounded px-2 py-0.5 text-sm focus:outline-none focus:border-blue-500 w-40"
  />

  <span>that are not explicitly covered by Test Guidelines is provided in</span>
  <span>document TGP/13 "Guidance for New Types and Species"</span>
</div>


  <!-- Add Paragraph button -->
 <!-- Add Paragraph button -->
<button class="rounded-full px-4 py-2 border border-yellow-400 text-green-900 hover:bg-gray-50 flex items-center gap-2 text-sm">
  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="10" stroke-width="2"/>
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v8m-4-4h8"/>
  </svg>
  Add Paragraph
</button>

</div>
  <!-- Section 3: Additional characteristics question -->
  <div class="max-w-4xl text-gray-700 text-sm  ">

  <!-- Question with inline radio buttons -->
  <div class="flex flex-wrap items-center ">
    <span>Might it be necessary to add additional characteristics or additional states of expressions for ornamental, fruit, industrial, vegetable, agricultural or other varieties?  <span class="text-red-500">*</span> </span>


     <mat-radio-group class="flex gap-6 ml-[29%] mb-4 mb-8">
    <mat-radio-button value="yes">Yes</mat-radio-button>
    <mat-radio-button value="no">No</mat-radio-button>
  </mat-radio-group>
  </div>

  <!-- Second sentence with inline input -->
  <div class="flex flex-wrap items-baseline  ">
    <span>In the case of</span>

    <input
      type="text"
      value="agricultural"
      class="border border-gray-300 bg-blue-50 rounded px-2 py-0.5 text-m focus:outline-none focus:border-blue-500 w-48"
    />

    <span>, in particular, it may be necessary to use additional characteristics or additional states of </span>
     <span>expression to those included in the Table of Characteristics in order to examine Distinctness, Uniformity and Stability.</span>
  </div>

  <!-- Preview section -->
  <div class="bg-whitesmoke-500 border border-orange-200 rounded px-3 py-2 mt-4">
    <div class="flex items-center gap-2 text-orange-600 font-medium mb-2">
      <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
        <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
      </svg>
      <span>PREVIEW</span>
    </div>
    <p class="text-gray-500 text-sm">
      1.1 These Test Guidelines apply to all varieties of Argania spinosa (L.) Skeels. Continue Sentence
    </p>
  </div>

</div>

</div>

--

<div class="mb-6">
  <h1 class="text-2xl font-semibold text-green-900">
    {{ sectionTitle }}
  </h1>
</div>

<mat-accordion class="max-w-5xl flex flex-col gap-4">

  <mat-expansion-panel
    *ngFor="let panel of panels"
    [expanded]="panel.expanded"
    class="mat-elevation-z0">

    <mat-expansion-panel-header togglePosition="before">
      <mat-panel-title class="font-semibold title-indent">
        {{ panel.title }}
      </mat-panel-title>
    </mat-expansion-panel-header>

    <!-- EMPTY PANEL -->
    <ng-container *ngIf="panel.type === 'empty'">
      <!-- future content -->
    </ng-container>

    <!-- RADIO PANEL -->
    <ng-container *ngIf="panel.type === 'radio'">

      <div class="p-4 space-y-4">

        <p class="text-sm text-gray-600">
          {{ panel.description }}
        </p>

        <mat-radio-group
          class="flex flex-col gap-3"
          [value]="panel.selectedValue"
          (change)="onRadioChange(panel, $event.value)">

          <mat-radio-button
            *ngFor="let option of panel.options"
            [value]="option.value">

            {{ option.label }}

          </mat-radio-button>
        </mat-radio-group>

        <mat-card class="bg-gray-50 border mat-elevation-z0">
          <mat-card-header>
            <mat-card-title class="text-sm font-semibold text-orange-600">
              PREVIEW
            </mat-card-title>
          </mat-card-header>

          <mat-card-content class="text-sm text-gray-600">
            {{ panel.previewText }}
          </mat-card-content>
        </mat-card>

      </div>

    </ng-container>

  </mat-expansion-panel>

</mat-accordion>

--

<div class="max-w-5xl space-y-6">

  <!-- Section Title -->
  <h2 class="text-lg font-semibold text-green-800">
    {{ methodOfExamination.title }}
  </h2>

  <mat-accordion>

    <mat-expansion-panel
      *ngFor="let section of methodOfExamination.sections"
      [expanded]="section.expanded"
      class="mat-elevation-z0 white-panel"
    >

      <mat-expansion-panel-header togglePosition="before">
        <mat-panel-title class="font-semibold title-indent">
          {{ section.id }} {{ section.title }}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="p-2 space-y-4">

        <!-- Related link -->
        <p *ngIf="section.relatedLink" class="text-sm text-gray-600">
          Related links:
          <a
            [href]="section.relatedLink.url"
            class="text-green-600 underline inline-flex items-center gap-1"
          >
            {{ section.relatedLink.text }}
            <mat-icon class="text-sm">open_in_new</mat-icon>
          </a>
        </p>

        <!-- Section Items -->
        <ng-container *ngFor="let item of section.items">

          <!-- TEXT ONLY -->
          <h4
            *ngIf="item.type === 'text'"
            class="font-semibold title-indent"
          >
            {{ item.id }} {{ item.title }}
          </h4>

          <!-- GROWING CYCLE -->
          <div *ngIf="item.type === 'cycle'" class="space-y-2">
            <h4 class="font-semibold title-indent">
              {{ item.id }} {{ item.title }}
            </h4>

            <mat-radio-group
              [(ngModel)]="form.growingCycle"
              class="flex flex-col gap-2"
            >
              <mat-radio-button
                *ngFor="let opt of item.options"
                [value]="opt.value"
              >
                {{ opt.label }}
              </mat-radio-button>
            </mat-radio-group>

            <div
              *ngIf="form.growingCycle === 'two'"
              class="ml-6 flex flex-col gap-2"
            >
              <mat-radio-button
                *ngFor="let sub of item.subOptions"
                [value]="sub.value"
                [(ngModel)]="form.cycleType"
              >
                {{ sub.label }}
              </mat-radio-button>
            </div>
          </div>

          <!-- FRUIT SECTION -->
          <div *ngIf="item.type === 'fruit'" class="space-y-3">
            <h4 class="font-semibold title-indent">
              {{ item.id }} {{ item.title }}
            </h4>

            <p class="text-sm text-gray-700">
              {{ item.question }}
            </p>

            <mat-radio-group
              [(ngModel)]="form.satisfactoryCrop"
              class="flex gap-6"
            >
              <mat-radio-button value="yes">Yes</mat-radio-button>
              <mat-radio-button value="no">No</mat-radio-button>
            </mat-radio-group>

            <mat-radio-group
              [(ngModel)]="form.fruitType"
              class="flex flex-col gap-2 mt-2"
            >
              <mat-radio-button
                *ngFor="let f of item.fruitTypes"
                [value]="f.value"
              >
                {{ f.label }}
                <span class="text-green-600 font-medium">
                  ({{ f.code }})
                </span>
              </mat-radio-button>
            </mat-radio-group>
          </div>

        </ng-container>

      </div>
    </mat-expansion-panel>

  </mat-accordion>
</div>

<div class="max-w-5xl flex flex-col gap-4">

  <!-- ================= PREVIEW HEADING ================= -->
  <h4 class="font-semibold title-indent">
    {{ previewSection.heading }}
  </h4>

  <!-- ================= PREVIEW CARD ================= -->
  <mat-card class="bg-gray-50 mat-elevation-z0 border">
    <mat-card-header>
      <mat-card-title class="text-sm font-semibold text-orange-600">
        PREVIEW
      </mat-card-title>
    </mat-card-header>

    <mat-card-content class="text-sm text-gray-700 space-y-3">

      <!-- Paragraphs -->
      <p *ngFor="let text of previewSection.paragraphs">
        {{ text }}
      </p>

      <!-- Inline input paragraph -->
      <p class="leading-6">
        3.1.3 In particular, it is essential that the
        <input
          type="text"
          [(ngModel)]="previewSection.inlineInputText"
          class="inline-mat-input"
        />
        produce a satisfactory crop of fruit in each of the two growing cycles.
      </p>

    </mat-card-content>
  </mat-card>

  <!-- ================= REUSABLE EXPANSION PANELS ================= -->
  <mat-expansion-panel
    *ngFor="let panel of simplePanels"
    class="mat-elevation-z0 border-b"
  >
    <mat-expansion-panel-header togglePosition="before">
      <mat-panel-title class="font-semibold title-indent">
        {{ panel.title }}
      </mat-panel-title>
    </mat-expansion-panel-header>
  </mat-expansion-panel>

</div>


</main>


</div>







